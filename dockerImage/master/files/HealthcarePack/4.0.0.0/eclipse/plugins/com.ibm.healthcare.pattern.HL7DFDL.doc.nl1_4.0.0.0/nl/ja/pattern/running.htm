<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja-jp" xml:lang="ja-jp">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="copyright" content="Copyright IBM Corporation 2013, 2014"/>
    <link rel="stylesheet" type="text/css" href="./css/pattern.css"/>
    <!-- 
    (C) COPYRIGHT International Business Machines Corp., 2013, 2014
    All Rights Reserved * Licensed Materials - Property of IBM
    --> 
    <title>「Healthcare: HL7 to HL7 DFDL」パターンの実行</title>
</head>
<body role="main">
<div class="section">
    <h1 class="topictitle1">「Healthcare: HL7 to HL7 DFDL」パターンの実行</h1>
    <p class="shortdesc">
このパターンでは着信メッセージを任意の数の宛先に配布できますが、開発と管理を容易にするため、各パターン・インスタンスには最大で 6 個の宛先が含まれます。
</p>
    <p>
    <b>始める前に:</b>
</p>
    <p>
IBM Integration Bus 資料の『パターンの使用』をお読みください。
</p>
</div>
<div class="image">
    <img src="running.png" alt="パターン・インスタンス・プロジェクト間で宛先がどのように分かれているかを示す図。" />
</div>
<div class = "description">
    <p>
パターンの最初のインスタンスによって宛先の合計数が決まり、特定の宛先に固有のパラメーターを除くすべてのパラメーターが構成されます。
使用する 6 個の宛先のグループすべてについて、新しいパターン・インスタンスを作成する必要があります。
例えば、16 個の宛先のあるパターンを作成するには、3 個のパターン・インスタンスが必要になります。
</p>
    <p>
モニターしやすくするために、各パターン・インスタンスの名前の末尾に番号を付けてください。
新しいパターン・インスタンスを作成するごとに番号を 1 つずつ増やし、<span class="msobjprop">「パート」</span>パラメーターの値をパターン・インスタンスの番号と一致させます。
例えば、パターン・インスタンスの番号が <span class="msobjpropval">3</span> であれば、パターン・インスタンス名は PatternInstance3 とし、<span class="msobjprop">「パート」</span>パラメーターの値も <span class="msobjpropval">3</span> とします。
</p>
</div>
<div class="section">
    <a name="config"></a> <h2 class="sectiontitle">パターンの構成
</h2> <h3>最大 6 個の宛先を指定してパターンを構成する
</h3>
    <p>
最大で 6 個の宛先を含むパターンを構成するには、以下の手順を実行します。
</p>
    <ol>
        <li>
<span class="uicontrol">「パターン仕様」</span>タブで、<span class="uicontrol">「新規インスタンスの作成」</span>をクリックします。
<span>「新規パターン・インスタンス」</span>ウィンドウが開きます。
</li>
        <li>
            最初のパターン・インスタンスのパターン・インスタンス名を入力します。容易にモニターできるよう、名前の末尾に <span class="msobjpropval">1</span> を付けます (例: PatternInstance1)。<span class="uicontrol">「OK」</span>をクリックします。
<span class="uicontrol">「パターン・パラメーターの構成」</span>タブが開きます。
</li>
        <li>
<span class="msobjprop">「パート」</span>パラメーターが <span class="msobjpropval">1</span> に設定されていることを確認し、使用する宛先の数 (例えば、<span class="msobjpropval">6</span>) を入力します。
各宛先について<span class="uicontrol">「宛先 <var>n</var> パラメーター」</span>セクションが自動的に作成されます (<var>n</var> は宛先の番号)。
</li>
        <li>
            オプション: 各宛先のパラメーターを確認し、必要に応じてそれらの構成を編集します。
</li>
        <li>
<span class="uicontrol">「生成」</span>をクリックします。
</li>
        <li>
           これでフローをデプロイできるようになりました。
</li>
    </ol>
    <h3>6 個より多い宛先を持つパターンを構成する
</h3>
    <p>
6 個より多い宛先を含むパターンを構成するには、以下の手順を実行します。
</p>
    <ol>
        <li>
<span class="uicontrol">「パターン仕様」</span>タブで、<span class="uicontrol">「新規インスタンスの作成」</span>をクリックします。
<span>「新規パターン・インスタンス」</span>ウィンドウが開きます。
</li>
        <li>
            最初のパターン・インスタンスのパターン・インスタンス名を入力します。容易にモニターできるよう、名前の末尾に <span class="msobjpropval">1</span> を付けます (例: PatternInstance1)。<span class="uicontrol">「OK」</span>をクリックします。
<span class="uicontrol">「パターン・パラメーターの構成」</span>タブが開きます。
</li>
        <li>
<span class="msobjprop">「パート」</span>パラメーターが <span class="msobjpropval">1</span> に設定されていることを確認し、使用する宛先の合計数 (例えば、<span class="msobjpropval">16</span>) を入力します。
最初のグループの 6 個の宛先それぞれについて<span class="uicontrol">「宛先 <var>n</var> パラメーター」</span>セクションが自動的に作成されます (<var>n</var> は宛先の番号)。
</li>
        <li>
            オプション: 各宛先のパラメーターを確認し、必要に応じてそれらの構成を編集します。
</li>
        <li>
<span class="uicontrol">「生成」</span>をクリックします。
</li>
        <li>
<span class="uicontrol">「パターン仕様」</span>タブに戻り、<span class="uicontrol">「新規インスタンスの作成」</span>をクリックします。
<span>「新規パターン・インスタンス」</span>ウィンドウが開きます。
</li>
        <li>
次のパターン・インスタンスのパターン・インスタンス名を入力します。
このとき、名前の最後にある番号を 1 つ増やしてください (例: PatternInstance2)。
<span class="uicontrol">「OK」</span>をクリックします。
<span class="uicontrol">「パターン・パラメーターの構成」</span>タブが開きます。
</li>
        <li>
最初のパターン・インスタンスから構成ファイルをインポートするために、<span class="uicontrol">「パターン・パラメーター」</span>テーブルの上部にある<span class="uicontrol">「既存の構成を開く」</span>フォルダー・アイコンをクリックします。
この操作により、最初のパターン・インスタンスで設定したすべてのパラメーターが使用可能になるため、次の宛先グループを正しく構成できます。
</li>
        <li>
<span class="msobjprop">「パート」</span>パラメーターを <span class="msobjpropval">2</span> に設定します。
2 番目のグループの 6 個の宛先それぞれについて<span class="uicontrol">「宛先 <var>n</var> パラメーター」</span>セクションが自動的に作成されます (<var>n</var> は宛先の番号)。
各宛先には、それぞれ独自の識別番号 7 から 12 が付きます。
</li>
        <li>
            オプション: 各宛先のパラメーターを確認し、必要に応じてそれらの構成を編集します。
パターン・パラメーターが最初のパターン・インスタンスから構成を継承している場合、パラメーターは使用不可になります。
</li>
        <li>
<span class="uicontrol">「生成」</span>をクリックします。
</li>
        <li>
作成する必要のある各パターン・インスタンスについてステップ 6 から 11 を繰り返します。
このとき、パターン・インスタンス番号と<span class="msobjprop">「パート」</span>パラメーターの値を該当する値に置き換えながら、それぞれの宛先に対してパターン・インスタンスを設定します。
</li>
        <li>
           これでフローをデプロイできるようになりました。
</li>
    </ol>
    <h3>キューおよびフローの名前</h3>
    <p>
フローおよびキューの名前は、パターンを生成するときに自動的に作成されます。
</p>
    <ol>
        <li>
各送信側フローおよび宛先サブフローには、その宛先番号を反映するように名前が付けられます。
例えば、宛先番号が 8 の場合は、フローの名前にも 8 という番号が含まれます。
</li>
        <li>
TransformAndRoute フローのキュー名は、<span class="msobjprop">「パート」</span>パラメーターの値を反映します。
例えば、宛先の 2 番目のグループを含むパターン・インスタンスのキュー名は、QueuePrefix.RXF2 です。
</li>
        <li>
各送信側フローのキュー名にも宛先の番号が入ります。
</li>
        <li>
その他のキューは、パターン・インスタンス・プロジェクト間で共用されます。
各パターン・インスタンスは独立して識別されますが、それらのパターン・インスタンスは 1 つのソース・アプリケーションによって駆動される 1 つのパターン・インスタンスとして管理されるからです。
</li>
    </ol>
</div>
<div class="section">
    <a name="deploying"></a> <h2 class="sectiontitle">パターン・インスタンスのデプロイ</h2>
    <p>
パターン・インスタンスをデプロイするには、以下の手順を実行します。
</p>
    <ol>
        <li>
<span>「アプリケーション開発」</span>ビューで、パターンのパート 1 について、生成した HL7toHL7DFDL アプリケーションを<span>「Integration ノード」</span>ビューにある統合サーバーにドラッグします。
</li>       
    </ol>
    <p>
これでパターンが実行中になるので、メッセージを送信できます。
</p>
</div>
<a href="overview.htm#anchorBack" title="戻る">「Healthcare: HL7 to HL7 DFDL」パターンの仕様に戻る</a>
<p>
</p>
</body>
</html>
