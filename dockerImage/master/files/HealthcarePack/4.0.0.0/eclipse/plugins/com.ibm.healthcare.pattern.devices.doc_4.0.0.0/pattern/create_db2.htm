<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="copyright" content="Copyright IBM Corporation 2011, 2014"/>
    <link rel="stylesheet" type="text/css" href="./css/pattern.css"/>
    <title>Set up DB2</title>
    <!-- 
       (C) COPYRIGHT International Business Machines Corp., 2011, 2014
       All Rights Reserved * Licensed Materials - Property of IBM
      -->
</head>
<body role="main">
<h1>Set up DB2</h1>
<p>
These instructions assume that you are using DB2 Universal Database and guide 
you through the following tasks:
</p>
<ul>
    <li>
        Create a database called PATSDB
    </li>
    <li>
        Bind the DB2 CLI packages
    </li>
    <li>
        Create a table, PATIENTS, to store the patient and device associations
    </li>
</ul>
<p>
<b>Note.</b> When you create and access the database tables, be aware of the 
following issues:
</p>
<ul>
    <li>
        When you run the script that creates the table in the database, the user 
        identifier from which you run the script determines the database schema name. 
        For example, if your user identifier is
        <span class="input">USERID</span>, 
        the fully qualified name of the PATIENTS table is USERID.PATIENTS.
    </li>
    <li>
        Configure your pattern instance to use the same user identifier to access the 
        database that you used when you created the database and tables, include the 
        schema name in the configuration. For example,
        <span class="filepath">Database.USERID.PATIENTS</span>.
    </li>
</ul>
<p>
Complete the following steps:
</p>
<ol>
    <li>
        In a DB2 command window, enter the following command to ensure that DB2 is 
        started:
        <pre>db2start</pre>
    </li>
    <li>
        Create a database called PATSDB.
    </li>
    <li>
        Open a new document in a text editor, copy and paste the following script, which 
        connects to the PATSDB database and runs the BIND utility, into the document, 
        name the file
        <span class="filepath">
        PATSDB.sql
        </span>
        and save the file.
        <ul>
            <li>
                <p>
                On
                <span>Windows</span>:
                </p>
                You must replace install_dir with the path to your DB2 product installation 
                directory, such as
                <span class="filepath">C:\PROGRA~1\IBM\SQLLIB</span>. 
                You can find this location by using the db2level command:
                <pre>
CONNECT TO PATSDB
BIND 'install_dir\bnd\@db2cli.lst' blocking all grant public
TERMINATE
                </pre>
            </li>
            <li>
                <p>
                On
                <span>Linux</span>:
                </p>
                You must replace install_dir with the path to your DB2 product installation 
                directory. You can find this location by using the db2level command:
                <pre>
CONNECT TO PATSDB
BIND install_dir/bnd/@db2cli.lst grant public CLIPKG 5
TERMINATE
                </pre>
            </li>
        </ul>
    </li>
    <li>
        In a DB2 command window, navigate to the folder that contains
        <span class="filepath">
        PATSDB.sql
        </span>
        and enter the following command:
        <pre>db2 -vf PATSDB.sql</pre>
    </li>
    <li>
        Open a new document in a text editor, copy and paste the following script, which 
        creates the PATIENTS table, into the document, name the file
        <span class="filepath">
        patients_create_tables_db2.sql
        </span>
        and save the file.
        <pre>
CONNECT TO PATSDB@
DROP TABLE "PATIENTS"@
CREATE TABLE "PATIENTS" (
    "DEVICEID" VARCHAR(50) NOT NULL PRIMARY KEY,
    "PATIENTID" VARCHAR(50)
)
DATA CAPTURE NONE@
TERMINATE@
        </pre>
    </li>
    <li>
        Ensure the database is running and connected.
    </li>
    <li>
        Open a command window to access your database, move to the folder that contains
        <span class="filepath">
        patients_create_tables_db2.sql
        </span>
        and enter the following command:
        <pre>db2 -td@ -vf patients_create_tables_db2.sql</pre>
        <p>
        Wait for the script to finish running. If you are running the script for the 
        first time, the following message is displayed:
        </p>
        <pre>
DB21034E  The command was processed as an SQL statement because it was not a
valid Command Line Processor command.  During SQL processing it returned:
SQL0204N  &quot;DB2ADMIN.PATIENTS&quot; is an undefined name.  SQLSTATE=42704
        </pre>
        Ignore this message. The message is displayed because the script attempts to 
        remove the existing table, PATIENTS, before it creates the new table, but if you 
        have not run the script before, the script cannot find the existing table.
    </li>
</ol>
<p>
</p>
<a href="create.htm" title="Back">Back to Setting up the patient identifier database</a>
<p>
</p>
</body>
</html>
