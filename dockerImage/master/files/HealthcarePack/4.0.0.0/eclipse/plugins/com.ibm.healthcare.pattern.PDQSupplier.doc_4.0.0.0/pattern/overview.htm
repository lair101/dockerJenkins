<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
	<!--
		(c) Copyright IBM Corporation 2015. All rights reserved.
		All Rights Reserved * Licensed Materials - Property of IBM 
	-->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta name="abstract" content="Overview of the Patient Demographics Query Supplier pattern"/>
        <link rel="stylesheet" type="text/css" href="./css/pattern.css"/>
	<title>Healthcare: Patient Demographics Query Supplier pattern</title>
	<script language="JavaScript" src="../help/actions.js" type="text/javascript"></script>
    </head>
<body role="main">
<h1 class="topictitle1"><span>Healthcare: Patient Demographics Query Supplier</span> pattern</h1>
    <div>
        <p class="shortdesc">Use the <span>Healthcare: Patient Demographics Query Supplier</span> pattern
	with IBM&reg; InfoSphere&reg; Master Data Management (MDM) to create a Patient Demographics Supplier that 
	you can use with the Integrating the Healthcare Enterprise (IHE) Patient Demographics Query (PDQ) profile. 
	You can then integrate your clinical applications with the pattern, to act as a Patient Demographics Consumer actors, 
        as defined in the PDQ profile.</p>
    </div>
    <div class="section">
	<h2 class="sectiontitle">Solution</h2>
        <p>You can use the <span>Healthcare: Patient Demographics Query Supplier</span> pattern to create an integration
	solution that receives QBP HL7 messages over MLLP from a clinical application (the Patient Demographics Consumer in the PDQ profile). 
	The integration solution then returns an appropriate response to the clinical application, as specified by transaction ITI-21 of the PDQ profile. 
	If the message is valid then the integration solution uses SOAP request/response messages to retrieve information from the 
	enterprise master patient index (EMPI) as specified by the content of the message. The EMPI runs in IBM InfoSphere MDM.</p>
	<p>The integration solution completes the following tasks:
	<ul>
	    <li>If the incoming message is a QBP message of type Q22, the integration solution retrieves a list of demographic information 
		from the EMPI for patients that match the search data that is specified in the incoming message. The query results are returned in an RSP (response) message.</li>
	    <li>For successful queries, an AA RSP (response) message of type K22 is returned. This message contains the list of demographic information 
		for the patients that match the search data that is specified in the incoming message.</li>
	    <li>For unsuccessful queries, an AE RSP, AE ACK, or AR ACK message is returned, depending on the reason for the failure. Additional information about the 
		failure is contained in the ERR segment of the response.</li>
	</ul>
	</p>
	<p>When you generate an instance of the <span>Healthcare: Patient Demographics Query Supplier</span> 
	pattern, a library named <span class="msobjpropval">IHEHL7DFDLLibrary</span> is created 
	automatically. The library contains a DFDL version 2.5.1 model, which is used to define the HL7 
	messages that are used by the pattern.</p>

	<h3>Acknowledgments</h3>
	<p>The following tables describe the values in the acknowledgment (ACK) messages that are returned by the pattern. ACK messages are returned by the pattern in 
	response to QBP messages if there is an error because the EMPI server was not contacted.</p>

	<div class="tablenoborder">
		<h4>MSH</h4>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						acknowledgment message</th>
					<th class="invisible" valign="top" width="34%">If not present
						in the input message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.1.FieldSeparator</th>
					<td valign="top" width="*" class="invisible">MSH.1.FieldSeparator
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '|' </span></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.2.ServiceString</th>
					<td valign="top" width="*" class="invisible">MSH.2.ServiceString
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '^~\&amp;' </span></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.3.SendingApplication</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Supplier Application</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Supplier</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.4.SendingFacility</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Supplier Facility</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Supplier</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.5.ReceivingApplication</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Application</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Consumer</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.6.ReceivingFacility</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Facility</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Consumer</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.7.DateTimeOfMessage</th>
					<td valign="top" width="*" class="invisible">Current date time
						in the format <span class="msobjprop"> YYYYMMddHHmmss </span></td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.9.MessageType</th>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval">'ACK^ACK^ACK'</span></td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.10.MessageControlID</th>
					<td valign="top" width="*" class="invisible">New unique
						identifier</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.11.ProcessingID</th>
					<td valign="top" width="*" class="invisible">MSH.11.ProcessingID
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> 'P' </span></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.12.VersionID</th>
					<td valign="top" width="*" class="invisible">MSH.12.VersionID
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '2.5' </span></td>
				</tr>
			</tbody>
		</table>
		<h4>MSA</h4>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						acknowledgment message</th>
					<th class="invisible" valign="top" width="34%">If not present
						in the input message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSA.1.AcknowledgmentCode</th>
					<td valign="top" width="*" class="invisible">On successful
						receipt of the message, the MSA acknowledgment code is set to <span
						class="msobjpropval">AA</span>. Otherwise, the MSA acknowledgment code is set to 
						<span class="msobjpropval">AR</span> or <span class="msobjpropval">AE</span>, depending on the error.</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSA.2.MessageControlID</th>
					<td valign="top" width="*" class="invisible">MSH.10.MessageControlID
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '123456789' </span></td>
				</tr>
			</tbody>
		</table>
		<h4>ERR</h4>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						acknowledgment message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.2.ErrorLocation</th>
					<td valign="top" width="*" class="invisible">The HL7 message field that contains the error</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.3.HL7ErrorCode</th>
					<td valign="top" width="*" class="invisible">The HL7 (communication) error code</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.4.Severity</th>
					<td valign="top" width="*" class="invisible">The severity of an application error</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.7.DiagnosticInformation</th>
					<td valign="top" width="*" class="invisible">Additional error information for SOAP faults</td>
				</tr>
			</tbody>
		</table>
	</div>
	<h3>Responses</h3>
	<p>The following tables describe the values in the response (RSP) messages that are returned by the pattern.</p>
	<div class="tablenoborder">
		<h4>MSH</h4>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						response message</th>
					<th class="invisible" valign="top" width="34%">If not present
						in the input message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.1.FieldSeparator</th>
					<td valign="top" width="*" class="invisible">MSH.1.FieldSeparator
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '|' </span></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.2.ServiceString</th>
					<td valign="top" width="*" class="invisible">MSH.2.ServiceString
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '^~\&amp;' </span></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.3.SendingApplication</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Supplier Application</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Supplier</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.4.SendingFacility</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Supplier Facility</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Supplier</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.5.ReceivingApplication</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Application</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Consumer</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.6.ReceivingFacility</th>
					<td valign="top" width="*" class="invisible">The value that is specified by the <span
						class="msobjprop">Facility</span> pattern parameter, in the <span class="uicontrol">Patient Demographics Consumer</span> 
						pattern parameters group</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.7.DateTimeOfMessage</th>
					<td valign="top" width="*" class="invisible">Current date time
						in the format <span class="msobjprop"> YYYYMMddHHmmss </span></td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.9.MessageType</th>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval">'RSP^K22^RSP_K21'</span></td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.10.MessageControlID</th>
					<td valign="top" width="*" class="invisible">New unique
						identifier</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.11.ProcessingID</th>
					<td valign="top" width="*" class="invisible">MSH.11.ProcessingID
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> 'P' </span></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSH.12.VersionID</th>
					<td valign="top" width="*" class="invisible">MSH.12.VersionID
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '2.5' </span></td>
				</tr>
			</tbody>
		</table>
		<h4>MSA</h4>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						response message</th>
					<th class="invisible" valign="top" width="34%">If not present
						in the input message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSA.1.AcknowledgmentCode</th>
					<td valign="top" width="*" class="invisible">On a successful
						query, the MSA acknowledgment code is set to <span
						class="msobjpropval">AA</span>. Otherwise, the MSA acknowledgment code is set to 
						<span class="msobjpropval">AR</span> or <span class="msobjpropval">AE</span>, depending on the error.</td>
					<td valign="top" width="*" class="invisible"></td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">MSA.2.MessageControlID</th>
					<td valign="top" width="*" class="invisible">MSH.10.MessageControlID
						from the input message</td>
					<td valign="top" width="*" class="invisible"><span
						class="msobjpropval"> '123456789' </span></td>
				</tr>
			</tbody>
		</table>
		<h4>ERR</h4>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						response message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.2.ErrorLocation</th>
					<td valign="top" width="*" class="invisible">The HL7 message field that contains the error</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.3.HL7ErrorCode</th>
					<td valign="top" width="*" class="invisible">The HL7 (communication) error code</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.4.Severity</th>
					<td valign="top" width="*" class="invisible">The severity of an application error</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">ERR.7.DiagnosticInformation</th>
					<td valign="top" width="*" class="invisible">Additional error information for SOAP faults</td>
				</tr>
			</tbody>
		</table>
		<h4>QAK</h4>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						response message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">QAK.1</th>
					<td valign="top" width="*" class="invisible">The query tag, as supplied in the incoming QBP message.</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">QAK.2</th>
					<td valign="top" width="*" class="invisible">The query response status:
					<ul>
						<li><span class="msobjpropval">OK</span> if data is found and there are no errors</li>
						<li><span class="msobjpropval">NF</span> if no data is found and there are no errors</li>
						<li><span class="msobjpropval">AE</span> if no domain specified in the input message is recognized</li>
					</ul></td>
				</tr>
			</tbody>
		</table>
		<h4>QPD</h4>
		<p>This segment is a copy of the QPD segment that was provided in the incoming QBP message.</p>
		<h4>PID</h4>
		<p>One PID segment is returned for each matching patient record that is found.</p>
		<table summary="" width="100%" border="1" cellpadding="4"
			cellspacing="0" frame="border" rules="all">
			<thead align="left">
				<tr>
					<th class="firstcol" align="left" valign="top" width="33%">Field
						name</th>
					<th class="invisible" valign="top" width="33%">Field value in
						response message</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">PID.3</th>
					<td valign="top" width="*" class="invisible">The unique identifier for the patient. If the patient is in multiple domains, one copy of 
					 this field is present for each domain and each copy contains the identifier for a domain.</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">PID.5</th>
					<td valign="top" width="*" class="invisible">The patient name.</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">PID.7</th>
					<td valign="top" width="*" class="invisible">The date and time of birth.</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">PID.8</th>
					<td valign="top" width="*" class="invisible">The sex of the patient.</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">PID.11</th>
					<td valign="top" width="*" class="invisible">The patient address.</td>
				</tr>
				<tr>
					<th align="left" valign="top" width="*" class="firstcol">PID.18</th>
					<td valign="top" width="*" class="invisible">The patient account number.</td>
				</tr>
			</tbody>
		</table>
	</div>
	</div>
	<div>

	<div class="familylinks">
	<a name="anchorBack"></a>
	<div class="section">
		<h2 class="sectiontitle">Related tasks</h2>
	</div>
	<p>Read the following section for information about how to apply and use this pattern.</p>
	<div>
		<a href="constraints.htm" title="Constraints on the use of the pattern">
		Constraints on the use of the pattern</a>
	</div>
	<div>
		<a href="before.htm" title="Tasks to complete before using the pattern">
		Tasks to complete before applying the pattern</a>
	</div>
<!--	<div>
		<a href="overview.htm">Constraints on the use of the pattern</a>
	</div>
	<div>
		<a href="overview.htm">Tasks to complete before applying the pattern</a>
	</div>
	<div>
		<a href="overview.htm">Apply and configure the pattern</a>
	</div> -->
	<div>
		<a href="parameters.htm">Parameters for the pattern</a>
	</div>
<!--	<div>
		<a href="overview.htm">Tasks to complete after generating the pattern</a>
	</div> -->
	</div>
    </div>
    </body>
</html>
