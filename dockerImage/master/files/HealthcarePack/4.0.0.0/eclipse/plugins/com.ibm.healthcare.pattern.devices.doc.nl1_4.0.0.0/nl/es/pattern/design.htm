<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es-es" xml:lang="es-es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="copyright" content="Copyright IBM Corporation 2011, 2014"/>
    <link rel="stylesheet" type="text/css" href="./css/pattern.css"/>
    <!--
    (C) COPYRIGHT International Business Machines Corp., 2011, 2014
    All Rights Reserved * Licensed Materials - Property of IBM
    --> 
    <title>Diseño del patrón Servicio sanitario: Dispositivos médicos a HL7</title>
</head>
<body role="main">
<a name="links"></a>
<div class="section">
    <h1 class="topictitle1">Diseño del patrón Servicio sanitario: Dispositivos médicos a HL7</h1>
    <p class="shortdesc">
    Este patrón utiliza el nodo MedicalDeviceInput para leer las medidas
y alertas de los dispositivos médicos. Las lecturas de los
dispositivos se transforman en mensajes de resultados de
observación HL7 (ORU R01). Los mensajes transformados se envían a una
aplicación de destino como un Historial clínico electrónico
(EMR - Electronic Medical Record)
utilizando el protocolo MLLP de HL7.
    </p>
</div>
<div>
    <p>
    Este tema contiene las secciones siguientes:
    </p>
    <div>
        <a href="design.htm#devices">Flujo de dispositivos médicos</a>
    </div>
    <div>
        <a href="design.htm#transform">Flujo Transformación y
direccionamiento</a>
    </div>
    <div>
        <a href="design.htm#sender">Flujo Sender</a>
    </div>
    <div>
        <a href="design.htm#service">Flujo de servicio</a>
    </div>
    <div>
        <a href="design.htm#results">Resultados
de la observación</a>
    </div>
    <div>
        <a href="design.htm#output">Salida de una instancia de
patrón</a>
    </div>
</div>
<div class="section">
    <a name="devices"></a><h2>Flujo Dispositivos médicos</h2>
    <p>
    El flujo Dispositivos médicos procesa los mensajes procedentes del
nodo
MedicalDeviceInput. En cada uno de los mensajes se añade una hora de
caducidad en la cabecera MQRFH2. Los mensajes se graban en una cola
preparada para el flujo Transformación y direccionamiento. Cuando
ya se ha grabado el mensaje en la cola, se publica un mensaje de
diario de la medición de dispositivo.
    </p>
</div>
<div class="section">
    <a name="transform"></a><h2>Flujo Transformación y  direccionamiento</h2>
    <p>
    El flujo Transformación y  direccionamiento convierte un mensaje de
dispositivo a un resultado de observación HL7 (ORU R01). El flujo
comprueba cada uno de los mensajes de dispositivo para asegurarse de
que la medición es válida. Las mediciones no válidas se graban en una
cola y se descartan. SI el patrón se ha configurado para buscar
identificadores de pacientes, el identificador de dispositivo se
utiliza como una clave para obtener el identificador de paciente
asociado al mensaje de dispositivo en la tabla de la base de datos. El
mensaje HL7 transformado se graba en una cola de no-concidencias del
flujo Sender.
    </p>
</div>
<div class="section">
    <a name="sender"></a><h2>Flujo Sender</h2>
    <p>
    El flujo Sender lee los mensajes HL7 de una cola y los envía a
    la aplicación de destino utilizando el protocolo MLLP de HL7. El
flujo Sender efectúa un número configurable de reintentos si se
interrumpe la entrega del mensaje. El flujo Sender comprueba el
tiempo de caducidad del mensaje. Si el mensaje ha tardado demasiado
tiempo en ser procesado, se graba en una cola de caducados y se
descarta.
    </p>
</div>
<div class="section">
    <a name="service"></a><h2>Flujo de servicio</h2>
    <p>
    Opcionalmente, el patrón puede crear una interfaz de servicio web
 a la base de datos de identificadores de pacientes. Esta interfaz
se implementa utilizando un flujo de mensajes. Las peticiones de
servicio web se reciben utilizando un nodo SOAPInput y se direccionan a
un nodo de cálculo que realiza la correspondiente consulta o
actualización de la base
de datos. El flujo requiere un conjunto de mensajes
    WSDL para configurar los nodos SOAP. Este conjunto de mensajes
se proporciona en el tema recursos de patrón.
    </p>
</div>
<div class="section">
    <a name="results"></a><h2>Resultados
de la observación</h2>
    <p>
    En las tablas siguientes se muestra cómo se construyen los
segmentos de los mensajes ORU R01 de HL7.
    </p>
</div>
<div class="tablenoborder">
    <h4>MSH</h4>
    <p>
    El segmento MSH define el propósito, el identificador de origen, el
identificador de destino, y algunos detalles de la sintaxis de un
mensaje HL7.
    </p>
    <table summary="" width="100%" border="1" cellpadding="4" cellspacing="0" frame="border" rules="all">
        <thead align="left">
        <tr>
            <th class="firstcol" align="left" valign="top" width="33%">Nombre del campo</th>
            <th class="invisible" valign="top" width="33%">Valor
del campo en el mensaje de resultado de observación</th>
            <th class="invisible" valign="top" width="33%">Configurado por el parámetro de patrón</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.1.FieldSeparator</th>
            <td valign="top" width="*" class="invisible">
                <span class="msobjpropval">
                '|'
                </span>
            </td>
            <td></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.ServiceString</th>
            <td valign="top" width="*" class="invisible">
                <span class="msobjpropval">
                '^~\&amp;'
                </span>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.3.SendingApplication</th>
            <td valign="top" width="*" class="invisible">'Intermediario
de mensajes'</td>
            <td valign="top" width="*" class="invisible">
                <span class="msobjprop">
                Identificador de origen
                </span>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.4.SendingFacility</th>
            <td valign="top" width="*" class="invisible">''</td>
            <td valign="top" width="*" class="invisible">
                <span class="msobjprop">
                Recurso de origen
                </span>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.5.ReceivingApplication</th>
            <td valign="top" width="*" class="invisible">'EMR'</td>
            <td>
                <span class="msobjprop">
                Identidad del destino
                </span>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.6.ReceivingFacility</th>
            <td valign="top" width="*" class="invisible">''</td>
            <td>
                <span class="msobjprop">
                Recurso de destino
                </span>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.7.DateTimeOfMessage</th>
            <td valign="top" width="*" class="invisible">Copiado de
la indicación de fecha y hora del mensaje del nodo MedicalDeviceInput</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.9.MessageType</th>
            <td valign="top" width="*" class="invisible">
                <span class="msobjpropval">
                'ORU^R01^ORU_R01'
                </span>
            </td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.10.MessageControlID</th>
            <td valign="top" width="*" class="invisible">UUID o
indicación de fecha y hora actual con el formato aaaaMMddHHmmssSSSSSS</td>
            <td valign="top" width="*" class="invisible">
                <span class="msobjprop">
                Identificadores de mensajes
                </span>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.11.ProcessingID</th>
            <td valign="top" width="*" class="invisible">
                <span class="msobjpropval">
                'P'
                </span>
            </td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">MSH.12.VersionID</th>
            <td valign="top" width="*" class="invisible">
                <span class="msobjpropval">
                '2.5'
                </span>
            </td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        </tbody>
    </table>
    <h4>PID</h4>
    <p>
    El segmento PID lo utilizan todas las aplicaciones como el medio
principal de comunicar la información de identificación de pacientes.  Este
segmento contiene información demográfica y de identificación de
pacientes permanente que, en su mayor parte, no es probable que varíe
con mucha frecuencia.
    </p>
    <table summary="" width="100%" border="1" cellpadding="4" cellspacing="0" frame="border" rules="all">
        <thead align="left">
        <tr>
            <th class="firstcol" align="left" valign="top" width="33%">Nombre del campo</th>
            <th class="invisible" valign="top" width="33%">Valor del
campo en el mensaje de resultado de observación</th>
            <th class="invisible" valign="top" width="33%">Configurado por el parámetro de patrón</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">PID.3.PatientIdentifierList</th>
            <td valign="top" width="*" class="invisible">Este
campo viene determinado por el parámetro de patrón <span class="msobjprop">
                Identificadores de paciente</span>.
                <p>
                El campo no se valora si <span class="msobjpropval">
                No hay identificadores de pacientes en los resultados de la observación</span>
                está seleccionado.
                </p>
                <p>
                El identificador de paciente del mensaje se copia
a este campo si <span class="msobjpropval">
                Utilizar identificadores de pacientes del dispositivo
                </span>
                está seleccionado.
                </p>
                <p>
                So
                <span class="msobjpropval">
                Buscar identificadores de pacientes en base de datos
                </span>
                está seleccionado, se utiliza el identificador de
dispositivo para buscar un identificador de paciente asociado en una
base de datos
                </p>
            </td>
            <td valign="top" width="*" class="invisible">
                <span class="msobjprop">
                Identificadores de pacientes
                </span>
            </td>
        </tr>
        </tbody>
    </table>
    <h4>PV1</h4>
    <p>
    El segmento PV1 lo utilizan las aplicaciones de administración
de pacientes para comunicar información sobre una cuenta o por
visitas específicas.
    </p>
    <table summary="" width="100%" border="1" cellpadding="4" cellspacing="0" frame="border" rules="all">
        <thead align="left">
        <tr>
            <th class="firstcol" align="left" valign="top" width="33%">Nombre del campo</th>
            <th class="invisible" valign="top" width="33%">Valor del
campo en el mensaje de resultado de observación</th>
            <th class="invisible" valign="top" width="33%">Configurado por el parámetro de patrón</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">PV1.2.PatientClass</th>
            <td valign="top" width="*" class="invisible">'I'</td>
            <td valign="top" width="*" class="invisible">
                <span class="msobjprop">
                Clase de paciente
                </span>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">PV1.3.AssignedPatientLocation</th>
            <td valign="top" width="*" class="invisible">Ubicación
a partir del mensaje del nodo MedicalDeviceInput</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        </tbody>
    </table>
    <h4>OBR</h4>
    <p>
    En el informe de datos clínicos, el OBR sirve como cabecera de
resultados.  Identifica el conjunto de observación representado por
las siguientes observaciones atómicas. 
    Incluye la información de
orden
relevante cuando se aplica. Contiene muchos de los atributos que
normalmente se aplican a todas las observaciones incluidas.
    </p>
    <table summary="" width="100%" border="1" cellpadding="4" cellspacing="0" frame="border" rules="all">
        <thead align="left">
        <tr>
            <th class="firstcol" align="left" valign="top" width="33%">Nombre del campo</th>
            <th class="invisible" valign="top" width="33%">Valor del
campo en el mensaje de resultado de observación</th>
            <th class="invisible" valign="top" width="33%">Configurado por el parámetro de patrón</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBR.7.ObservationDateTime</th>
            <td valign="top" width="*" class="invisible">Igual que
                <span class="msobjprop">
                MSH.7.DateTimeOfMessage
                </span>
            </td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBR.10.CollectorIdentifier</th>
            <td valign="top" width="*" class="invisible">Igual que <span class="msobjprop">
                PV1.3.AssignedPatientLocation
                </span>
            </td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        </tbody>
    </table>
    <h4>OBX</h4>
    <p>
    El segmento de OBX se utiliza para transmitir una sola observación o
fragmento de observación. 
    Representa la unidad indivisible más
pequeña de un resultado.
    </p>
    <table summary="" width="100%" border="1" cellpadding="4" cellspacing="0" frame="border" rules="all">
        <thead align="left">
        <tr>
            <th class="firstcol" align="left" valign="top" width="33%">Nombre del campo</th>
            <th class="invisible" valign="top" width="33%">Valor del
campo en el mensaje de resultado de observación</th>
            <th class="invisible" valign="top" width="33%">Configurado por el parámetro de patrón</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBX.1.SetIDOBX</th>
            <td valign="top" width="*" class="invisible">Índice
numérico del segmento OBX que empieza desde el 1.</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBX.2.ValueType</th>
            <td valign="top" width="*" class="invisible">'ST'</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBX.3.ObservationIdentifier</th>
            <td valign="top" width="*" class="invisible">Identificadores primario y secundario
            del mensaje del nodo MedicalDeviceInput, y una breve
descripción del tipo de medición.</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBX.5.ObservationValue</th>
            <td valign="top" width="*" class="invisible">Valor del
mensaje del nodo MedicalDeviceInput.</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBX.6.Units</th>
            <td valign="top" width="*" class="invisible">Unidades del
mensaje del nodo MedicalDeviceInput.</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBX.11.ObservationResultStatus</th>
            <td valign="top" width="*" class="invisible">'F'</td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">OBX.14.DateTimeoftheObservation</th>
            <td valign="top" width="*" class="invisible">Igual que <span class="msobjprop">
                MSH.7.DateTimeOfMessage
                </span>
            </td>
            <td valign="top" width="*" class="invisible"></td>
        </tr>
        </tbody>
    </table>
    <p>
    El patrón crea varios segmentos OBX de los mensajes en forma de onda,
ya que pueden contener varias mediciones.
    </p>
</div>
<div class="section">
    <a name="output"></a><h2>Salida de una instancia de patrón</h2>
    <p>
    Además de los mensajes HL7 direccionados a la aplicación de
destino, este patrón ofrece diversas otras salidas. Estas salidas se
graban en una cola o se envían a un nodo Publication. El destino
viene determinado por el parámetro de patrón
    <span class="msobjprop">
    Publicar</span>. Si se selecciona la opción
<span class="msobjpropval">Publicar</span>, toda la información se
publica utilizando una jerarquía de temas que comienza con el nombre
de la instancia de patrón. </p>
    <p>
    Si se selecciona la opción
    <span class="msobjpropval">
    Grabar en cola</span>, la salida se envía a las colas con los
nombres generados a partir del parámetro de patrón
<span class="msobjprop">
    Prefijo de cola
    </span>
    y un conjunto fijo de sufijos, como se muestra en la tabla
siguiente.
    </p>
    <p>
    <b>Nota</b>: La faceta inicial de cada tema  (el nombre de
instancia de patrón) no se muestra.
    </p>
</div>
<div class="tablenoborder">
    <table summary="" width="100%" border="1" cellpadding="4" cellspacing="0" frame="border" rules="all">
        <thead align="left">
        <tr>
            <th class="firstcol" align="left" valign="top" width="20%">Salida</th>
            <th class="invisible" valign="top" width="15%">Sufijo de cola</th>
            <th class="invisible" valign="top" width="15%">Tema</th>
            <th valign="top" width="50%">Notas</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">Diario</th>
            <td valign="top" width="*" class="invisible">.JRNL</td>
            <td valign="top" width="*" class="invisible">/Journal</td>
            <td valign="top" width="*" class="invisible">Esta salida
proporciona un diario de mensajes de entrada en formato de patrón
estándar.
                <p>
                Ver Nota 1.
                </p>
            </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">A Transformación y direccionamiento</th>
            <td valign="top" width="*" class="invisible">.RXF</td>
            <td valign="top" width="*" class="invisible">No aplicable</td>
            <td valign="top" width="*" class="invisible">Cada mensaje
se envía al flujo Transformación y direccionamiento. </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">Mensajes erróneos</th>
            <td valign="top" width="*" class="invisible">.ERR</td>
            <td valign="top" width="*" class="invisible">No aplicable</td>
            <td valign="top" width="*" class="invisible">Los mensajes
que no se pueden procesar correctamente se graban en la cola de
errores con la información de error en una cabecera MQRFH2.</td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">Canónico</th>
            <td valign="top" width="*" class="invisible">.CAN</td>
            <td valign="top" width="*" class="invisible">/Canonical</td>
            <td valign="top" width="*" class="invisible">Si se
selecciona la opción de dar como salida un canal de información
canónico, se graba una copia en formato HL7 canónico del mensaje de
entrada.</td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">A emisor</th>
            <td valign="top" width="*" class="invisible">.DEST</td>
            <td valign="top" width="*" class="invisible">No aplicable</td>
            <td valign="top" width="*" class="invisible">Cada mensaje
se envía al flujo Sender una vez transformado a HL7. </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">Mensajes caducados</th>
            <td valign="top" width="*" class="invisible">.EXP</td>
            <td valign="top" width="*" class="invisible">No aplicable</td>
            <td valign="top" width="*" class="invisible">Los mensajes
que han superado el tiempo de caducidad configurado se graban en esta
cola. </td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">Registro de servicio</th>
            <td valign="top" width="*" class="invisible">.LOG</td>
            <td valign="top" width="*" class="invisible">No aplicable</td>
            <td valign="top" width="*" class="invisible">Guarda una
copia de todos los mensajes SOAP de solicitud y de respuesta del
servicio web de identificadores de pacientes.</td>
        </tr>
        <tr>
            <th align="left" valign="top" width="*" class="firstcol">Sin
identificador de paciente coincidente</th>
            <td valign="top" width="*" class="invisible">.NOMATCH</td>
            <td valign="top" width="*" class="invisible">No aplicable</td>
            <td valign="top" width="*" class="invisible">Los mensajes
que no tienen un identificador de paciente coincidente se
graban en esta cola. </td>
        </tr>
        </tbody>
    </table>
    <p>
    <b>Nota 1:</b> Se puede generar un mensaje de diario a partir de
un mensaje de origen añadiendo cabeceras MQMD y MQRFH2. En la
cabecera MQRFH2 se incluye:
    </p>
    <ul>
        <li>
            Nombre del nodo de integración
        </li>
        <li>
            Flujo de mensajes
        </li>
        <li>
            Indicación de la hora actual
        </li>
    </ul>
</div>
<p>
</p>
<a href="overview.htm#anchorBack" title="Atrás">Volver a
la especificación del patrón Servicio sanitario: Dispositivos médicos
a EMR</a>
<p>
</p>
</body>
</html>
