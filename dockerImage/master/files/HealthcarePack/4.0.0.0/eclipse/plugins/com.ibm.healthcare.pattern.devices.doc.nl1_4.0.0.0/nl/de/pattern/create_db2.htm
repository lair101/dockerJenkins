<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="copyright" content="Copyright IBM Corporation 2011, 2014"/>
    <link rel="stylesheet" type="text/css" href="./css/pattern.css"/>
    <title>DB2 einrichten</title>
    <!-- 
       (C) COPYRIGHT International Business Machines Corp., 2011, 2014
       All Rights Reserved * Licensed Materials - Property of IBM
      -->
</head>
<body role="main">
<h1>DB2 einrichten</h1>
<p>
Bei diesen Anweisungen wird vorausgesetzt, dass Sie DB2 Universal Database verwenden. Sie werden durch die folgenden Tasks geführt:
</p>
<ul>
    <li>
        Erstellen einer Datenbank namens PATSDB
    </li>
    <li>
        Binden der DB2-Befehlszeilenschnittstellenpakete
    </li>
    <li>
        Erstellen der Tabelle PATIENTS, in der die Patienten- und Gerätezuordnungen gespeichert werden
    </li>
</ul>
<p>
<b>Hinweis:</b> Bei der Erstellung der Datenbanktabellen und beim Zugriff auf diese müssen Sie folgende Punkte beachten:
</p>
<ul>
    <li>
        Bei der Ausführung des Scripts für die Erstellung der Tabelle in der Datenbank wird der Datenbankschemaname durch die Benutzer-ID bestimmt, mit der Sie das Script ausführen. 
        Wenn Ihre Benutzer-ID beispielsweise <span class="input">USERID</span> lautet, wird als vollständig qualifizierter Name der PATIENTS-Tabelle der Tabellenname USERID.PATIENTS verwendet.
</li>
    <li>
        Konfigurieren Sie Ihre Musterinstanz so, dass dieselbe Benutzer-ID für den Zugriff auf die Datenbank verwendet wird, die Sie bei der Erstellung der Datenbank und der Tabellen verwendet haben. Nehmen Sie den Schemanamen in die Konfiguration auf. Beispiel: <span class="filepath">Database.USERID.PATIENTS</span>.
</li>
</ul>
<p>
Führen Sie folgende Schritte aus:
</p>
<ol>
    <li>
        Geben Sie in einem DB2-Befehlsfenster folgenden Befehl ein, um sicherzustellen, dass DB2 gestartet wird:
        <pre>db2start</pre>
    </li>
    <li>
        Erstellen Sie eine Datenbank namens PATSDB.
</li>
    <li>
        Öffnen Sie ein neues Dokument in einem Texteditor, kopieren Sie das folgende Script, das eine Verbindung zur PATSDB-Datenbank herstellt und das BIND-Dienstprogramm ausführt, fügen Sie es in das Dokument ein, nennen Sie die Datei <span class="filepath">
        PATSDB.sql
        </span>
        und speichern Sie die Datei.
<ul>
            <li>
                <p>
                <span>Windows</span>:
                </p>
                Sie müssen die Angabe 'Installationsverzeichnis' durch den Pfad Ihres DB2-Produktinstallationsverzeichnisses ersetzen, zum Beispiel <span class="filepath">C:\PROGRA~1\IBM\SQLLIB</span>. Diesen Pfad können Sie mit dem Befehl
        'db2level' suchen:
                <pre>
CONNECT TO PATSDB
BIND 'Installationsverzeichnis\bnd\@db2cli.lst' blocking all grant public
TERMINATE
                </pre>
            </li>
            <li>
                <p>
                <span>Linux</span>:
                </p>
                Sie müssen die Angabe 'Installationsverzeichnis' durch den Pfad Ihres DB2-Produktinstallationsverzeichnisses ersetzen. Diesen Pfad können Sie mit dem Befehl
        'db2level' suchen:
                <pre>
CONNECT TO PATSDB
BIND Installationsverzeichnis/bnd/@db2cli.lst grant public CLIPKG 5
TERMINATE
                </pre>
            </li>
        </ul>
    </li>
    <li>
        Wechseln Sie in einem DB2-Befehlsfenster zu dem Ordner, der die Datei <span class="filepath">
        PATSDB.sql
        </span>
        enthält, und geben Sie folgenden Befehl ein:
        <pre>db2 -vf PATSDB.sql</pre>
    </li>
    <li>
        Öffnen Sie ein neues Dokument in einem Texteditor, kopieren Sie das folgende Script, das die PATIENTS-Tabelle erstellt, fügen Sie es in das Dokument ein, nennen Sie die Datei <span class="filepath">
        patients_create_tables_db2.sql
        </span>
        und speichern Sie die Datei.
<pre>
CONNECT TO PATSDB@
DROP TABLE "PATIENTS"@
CREATE TABLE "PATIENTS" (
    "DEVICEID" VARCHAR(50) NOT NULL PRIMARY KEY,
    "PATIENTID" VARCHAR(50)
)
DATA CAPTURE NONE@
TERMINATE@
        </pre>
    </li>
    <li>
        Stellen Sie sicher, dass die Datenbank aktiv ist und eine Verbindung besteht.
</li>
    <li>
        Öffnen Sie für den Zugriff auf die Datenbank ein Befehlsfenster, wechseln Sie zu dem Ordner, der die Datei <span class="filepath">
        patients_create_tables_db2.sql
        </span>
        enthält, und geben Sie folgenden Befehl ein:
        <pre>db2 -td@ -vf patients_create_tables_db2.sql</pre>
        <p>
        Warten Sie das Ende des Scripts ab. Wenn Sie das Script zum ersten Mal ausführen, wird folgende Nachricht angezeigt:
        </p>
        <pre>
DB21034E  Der Befehl wurde als SQL-Anweisung verarbeitet, da es sich um keinen gültigen Befehl des
          Befehlszeilenprozessors handelte.  Während der SQL-Verarbeitung wurde Folgendes zurückgegeben:
SQL0204N  &quot;DB2ADMIN.PATIENTS&quot; ist ein nicht definierter Name.  SQLSTATE=42704
        </pre>
        Ignorieren Sie diese Nachricht. Die Nachricht wird angezeigt, da das Script vor der Erstellung der neuen Tabelle versucht, die vorhandene Tabelle PATIENTS zu entfernen. Wenn Sie das Script zuvor jedoch noch nie ausgeführt haben, kann das Script die vorhandene Tabelle nicht finden.
</li>
</ol>
<p>
</p>
<a href="create.htm" title="Zurück">Zurück zu 'Datenbank der Patientenkennungen einrichten'</a>
<p>
</p>
</body>
</html>
